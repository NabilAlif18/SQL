-- soal no 1
CREATE DATABASE Tugas1

BEGIN TRAN
CREATE TABLE Student(
	Stud_ID CHAR(10) ,
	Stud_FNAME VARCHAR(20),
	Stud_LNAME VARCHAR(20),
	Stud_STREET VARCHAR(50),
	Stud_CITY VARCHAR(20),
)
COMMIT
SELECT * FROM Student


BEGIN TRAN
CREATE TABLE ENROLL(
	Stud_ID CHAR(10),
	CLASS_ID CHAR(10) CHECK (CLASS_ID like 'CLS[0-9][0-9][0-9][0-9][0-9]'),
	GRADE INT CHECK (GRADE > 0 AND GRADE < 100)
	)
	SELECT * FROM ENROLL
	COMMIT

BEGIN TRAN
CREATE TABLE CLASS(
	CLASS_ID CHAR(10),
	CLASS_NAME VARCHAR(10),
	PROF_ID VARCHAR(20) CHECK (PROF_ID like '[A-Z][0-9][0-9][0-9][0-9][0-9]'),
	)

	SELECT * FROM CLASS
	COMMIT


BEGIN TRAN
CREATE TABLE PROF(
	PROF_ID VARCHAR(20) ,
	PROF_LNAME VARCHAR(20),
	PROF_FNAME VARCHAR(10)
	)

SELECT * FROM PROF
COMMIT



--no 2


ALTER TABLE Student
ALTER COLUMN Stud_ID CHAR(10) NOT NULL

ALTER TABLE Student
ADD PRIMARY KEY(Stud_ID)


ALTER TABLE ENROLL
ALTER COLUMN STUD_ID CHAR(10) NOT NULL


ALTER TABLE ENROLL
ALTER COLUMN CLASS_ID CHAR(10) NOT NULL


ALTER TABLE ENROLL
ADD PRIMARY KEY(Stud_ID,CLASS_ID)


ALTER TABLE CLASS
ALTER COLUMN CLASS_ID CHAR(10) NOT NULL


ALTER TABLE CLASS
ADD PRIMARY KEY(CLASS_ID)

ALTER TABLE PROF
ALTER COLUMN PROF_ID VARCHAR(20) NOT NULL


ALTER TABLE PROF
ADD PRIMARY KEY(PROF_ID)



ALTER TABLE ENROLL
ADD FOREIGN KEY (Stud_ID) REFERENCES Student(Stud_ID)

ALTER TABLE ENROLL
ADD FOREIGN KEY (CLASS_ID) REFERENCES CLASS(CLASS_ID)


--no 3	
BEGIN TRAN
INSERT INTO Student values
('S00001','Nabil','alif','juraganan','jakarta'),
('S00002','Kurnia','Jaya','Kemang','jakarta'),
('S00003','Budi','kusnadi','pondok indah','jakarta'),
('S00004','surya','kencana','bukit tinggi','padang'),
('S00005','siti','kusnati','pangebean','jogja')

SELECT * FROM Student
commit


BEGIN TRAN
INSERT INTO PROF VALUES
('D11234','Siti','sumiyati'),
('D12332','kusep','kusnandar'),
('C32213','irfan','butomo'),
('S49203','mahesa','ulin'),
('D34574','komar','korimah')
SELECT*FROM PROF
COMMIT

BEGIN TRAN
INSERT INTO CLASS VALUES
('CLS00001', 'Math', 'D11234'),
('CLS00002', 'Geography', 'D12332'),
('CLS00003', 'biology', 'C32213'),
('CLS00004', 'Accounting', 'S49203'),
('CLS00005', 'Paint', 'D34574')
SELECT * FROM CLASS
COMMIT

INSERT INTO ENROLL VALUES
('S00001','CLS00001','70'),
('S00002','CLS00002','90'),
('S00003','CLS00003','30'),
('S00004','CLS00004','40'),
('S00005','CLS00005','20')

SELECT * FROM ENROLL

-- no 4
UPDATE Enroll
SET Grade +=5
FROM Enroll

SELECT * FROM Enroll

--no 5 

DELETE FROM Room
WHERE ROOM_CAP > 60
